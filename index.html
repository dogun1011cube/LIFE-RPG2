<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>LIFE RPG – Hardcore Tower Mode</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <div id="intro" class="screen">
    <div id="introBg" class="intro-bg" aria-hidden="true"></div>

    <div class="intro-ui">
      <div class="intro-top">
        <div class="badge">LIFE RPG</div>
        <div class="small">성으로 들어가는 중…</div>
      </div>

      <div class="intro-bottom">
        <div class="intro-progress">
          <div class="dot" data-dot="1"></div>
          <div class="dot" data-dot="2"></div>
          <div class="dot" data-dot="3"></div>
        </div>

        <div class="intro-actions">
          <button id="skipBtn" class="btn ghost">스킵</button>
          <button id="enterBtn" class="btn primary hidden">입장</button>
        </div>

        <div class="hint">자동 전환: 3초 · 스킵은 “다음 장면”으로 이동</div>
      </div>
    </div>
  </div>

  <div id="game" class="screen hidden">
    <header class="topbar">
      <div class="title">
        <div class="logo">🗼</div>
        <div>
          <div class="h1">LIFE RPG</div>
          <div class="sub">Hardcore Tower Mode</div>
        </div>
      </div>

      <div class="top-actions">
        <button id="profileBtn" class="btn ghost">프로필</button>
        <button id="shopBtn" class="btn ghost">상점</button>
        <button id="recordsBtn" class="btn ghost">기록</button>
        <button id="resetBtn" class="btn danger">초기화</button>
      </div>
    </header>

    <main class="layout">
      <section class="card stats">
        <div class="cardTitle">현재 상태</div>
        <div class="grid2">
          <div class="stat"><div class="k">Day</div><div class="v" id="dayText">1</div></div>
          <div class="stat"><div class="k">Level</div><div class="v" id="levelText">1</div></div>
          <div class="stat"><div class="k">XP</div><div class="v" id="xpText">0</div></div>
          <div class="stat"><div class="k">Gold</div><div class="v" id="goldText">0G</div></div>
          <div class="stat"><div class="k">Tower</div><div class="v" id="floorText">0F</div></div>
          <div class="stat"><div class="k">Battle</div><div class="v" id="battleText">0</div></div>
          <div class="stat wide"><div class="k">총 공부 시간</div><div class="v" id="totalText">00:00:00</div></div>
        </div>
        <div class="miniNote" id="lastDrop">v2.0 – Intro + Tower + Shop</div>
      </section>

      <section class="card tower">
        <div class="cardTitle">타워</div>
        <div class="towerWrap">
          <div class="towerTrack">
            <div class="towerTick" style="top:10%"></div>
            <div class="towerTick" style="top:30%"></div>
            <div class="towerTick" style="top:50%"></div>
            <div class="towerTick" style="top:70%"></div>
            <div class="towerTick" style="top:90%"></div>
          </div>
          <div class="towerInfo">
            <div class="big">현재 <span id="floorText2">0</span>F</div>
            <div class="small">10분 공부 = 1층 상승</div>
            <div class="small">일반층: 슬라임 출현</div>
          </div>
          <div class="slimeBox">
            <img id="slimeImg" src="assets/slime.png" alt="slime"/>
            <div class="small" style="opacity:.85;margin-top:6px;">기본 몬스터</div>
          </div>
        </div>
      </section>

      <section class="card input">
        <div class="cardTitle">공부 기록 추가</div>

        <div class="row">
          <label class="lbl">과목</label>
          <select id="subjectSelect" class="select"></select>
          <button id="addSubjectOpenBtn" class="btn ghost smallBtn">과목 추가</button>
        </div>

        <div id="addSubjectRow" class="row hidden">
          <input id="newSubjectInput" class="text" placeholder="새 과목 이름"/>
          <button id="addSubjectBtn" class="btn primary smallBtn">추가</button>
        </div>

        <div class="row">
          <label class="lbl">시간</label>
          <div class="hms">
            <input id="hoursInput" class="num" type="number" min="0" placeholder="시"/>
            <span>:</span>
            <input id="minutesInput" class="num" type="number" min="0" placeholder="분"/>
            <span>:</span>
            <input id="secondsInput" class="num" type="number" min="0" placeholder="초"/>
          </div>
          <button id="addStudyBtn" class="btn primary">추가</button>
        </div>

        <div class="row">
          <button id="wakeBtn" class="btn ghost">“일어났어” (Day +1)</button>
          <button id="endDayBtn" class="btn ghost">하루 마감</button>
        </div>

        <div class="miniNote">
          규칙: 자정 기준 ❌ · “일어났어” 누르면 Day 증가 · 1분=1XP · 10분=1G/1층
        </div>
      </section>

      <section class="card log">
        <div class="cardTitle">로그 (클릭해서 수정/삭제)</div>
        <div id="log" class="logList"></div>
      </section>
    </main>

    <!-- Reward bar -->
    <div id="rewardBar" class="rewardBar hidden">
      <div class="rewardLeft">
        <div class="rewardTitle">보상 시간 진행 중</div>
        <div class="rewardTime" id="rewardRemaining">00:00</div>
      </div>
      <div class="rewardRight">
        <button id="openRewardBtn" class="btn primary smallBtn">사이트 열기</button>
        <button id="backToGameBtn" class="btn ghost smallBtn">게임으로 돌아오기</button>
      </div>
    </div>

    <!-- Overlays -->
    <div id="profileOverlay" class="overlay hidden" role="dialog" aria-modal="true">
      <div class="modal">
        <div class="modalTop">
          <div class="modalTitle">프로필</div>
          <button id="closeProfileBtn" class="btn ghost smallBtn">닫기</button>
        </div>

        <div class="row">
          <label class="lbl">선택</label>
          <select id="profileSelect" class="select"></select>
          <button id="newProfileBtn" class="btn ghost smallBtn">새 프로필</button>
        </div>

        <div id="newProfileRow" class="row hidden">
          <input id="newProfileInput" class="text" placeholder="프로필 이름 (예: 나, 동생, 시험기간)"/>
          <button id="createProfileBtn" class="btn primary smallBtn">생성</button>
        </div>

        <div class="row">
          <button id="exportBtn" class="btn ghost">내보내기</button>
          <button id="importBtn" class="btn ghost">가져오기</button>
          <input id="importFile" type="file" accept="application/json" class="hidden"/>
        </div>

        <div class="miniNote">※ 이번 버전은 “새 레포”라 기본적으로 처음부터 시작해.</div>
      </div>
    </div>

    <div id="recordsOverlay" class="overlay hidden" role="dialog" aria-modal="true">
      <div class="modal">
        <div class="modalTop">
          <div class="modalTitle">기록 관리</div>
          <button id="closeRecordsBtn" class="btn ghost smallBtn">닫기</button>
        </div>

        <div class="row">
          <input id="recordsSearch" class="text" placeholder="과목 검색"/>
          <label class="chk"><input type="checkbox" id="recordsSelectAll"/> 전체 선택</label>
          <button id="deleteSelectedBtn" class="btn danger smallBtn">선택 삭제</button>
        </div>

        <div id="recordsList" class="recordsList"></div>
        <div class="miniNote">상점 구매 기록은 삭제 불가</div>
      </div>
    </div>

    <div id="shopOverlay" class="overlay hidden" role="dialog" aria-modal="true">
      <div class="modal">
        <div class="modalTop">
          <div class="modalTitle">상점</div>
          <button id="closeShopBtn" class="btn ghost smallBtn">닫기</button>
        </div>

        <div class="row">
          <div class="miniNote">구매하면 보상 타이머가 시작돼. 시간 끝나면 이 탭은 차단 페이지로 이동해.</div>
        </div>

        <div class="row">
          <label class="lbl">열 사이트</label>
          <input id="rewardUrl" class="text" placeholder="https://... (예: https://www.youtube.com)"/>
        </div>

        <div class="shopGrid">
          <button class="shopItem" data-cost="100" data-min="30">
            <div class="name">유튜브 30분</div>
            <div class="meta">100G · 30분</div>
          </button>
          <button class="shopItem" data-cost="80" data-min="30">
            <div class="name">디저트</div>
            <div class="meta">80G · 30분</div>
          </button>
          <button class="shopItem" data-cost="50" data-min="20">
            <div class="name">산책</div>
            <div class="meta">50G · 20분</div>
          </button>
        </div>

        <div class="miniNote">
          ※ 브라우저 보안상 “외부 탭을 강제 종료/강제 이동”은 완벽히 불가.
          대신 게임 탭이 시간 만료를 감지하면 즉시 차단 페이지로 이동해.
        </div>
      </div>
    </div>

    <div id="editOverlay" class="overlay hidden" role="dialog" aria-modal="true">
      <div class="modal">
        <div class="modalTop">
          <div class="modalTitle">기록 수정</div>
          <button id="closeEditBtn" class="btn ghost smallBtn">닫기</button>
        </div>

        <div class="row">
          <label class="lbl">과목</label>
          <select id="editSubjectSelect" class="select"></select>
          <button id="editAddSubjectOpenBtn" class="btn ghost smallBtn">과목 추가</button>
        </div>

        <div id="editAddSubjectRow" class="row hidden">
          <input id="editNewSubjectInput" class="text" placeholder="새 과목 이름"/>
          <button id="editAddSubjectBtn" class="btn primary smallBtn">추가</button>
        </div>

        <div class="row">
          <label class="lbl">시간</label>
          <div class="hms">
            <input id="editHours" class="num" type="number" min="0" placeholder="시"/>
            <span>:</span>
            <input id="editMinutes" class="num" type="number" min="0" placeholder="분"/>
            <span>:</span>
            <input id="editSeconds" class="num" type="number" min="0" placeholder="초"/>
          </div>
        </div>

        <div class="row">
          <button id="saveEditBtn" class="btn primary">저장</button>
          <button id="deleteEditBtn" class="btn danger">삭제</button>
        </div>

        <div class="miniNote">상점 구매 기록은 수정/삭제 불가</div>
      </div>
    </div>
  </div>

  <script src="main.js"></script>
</body>
</html>
